name: Solana Container
on:
  push:
    branches:
      - solana

jobs:
  solana-docker:
    runs-on: ubuntu-latest
    container:
      image: solanalabs/solana:stable
    steps:
      - name: apt-get update
        run: apt-get update
      - name: apt-get install procps
        run: apt-get install -y procps
      - name: Solana version
        run: |
          cat /etc/os-release
          solana --version
      - name: Solana Test Validator
        run: solana-test-validator &
      - name: Kill Solana Test Validator Process
        run: pkill solana-test-validator